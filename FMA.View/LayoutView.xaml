<UserControl x:Class="FMA.View.LayoutView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:contracts="clr-namespace:FMA.Contracts;assembly=FMA.Contracts"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
             xmlns:helpers="clr-namespace:FMA.View.Helpers"
             xmlns:helpers1="clr-namespace:FMA.View.Helpers;assembly=FMA.Contracts"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:models="clr-namespace:FMA.View.Models"
             xmlns:properties="clr-namespace:FMA.View.Properties"
             xmlns:view="clr-namespace:FMA.View"
             mc:Ignorable="d">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resources.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid x:Name="InputAndPreview">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <ScrollViewer Margin="4"
                      HorizontalScrollBarVisibility="Auto"
                      VerticalScrollBarVisibility="Auto">

            <Grid IsSharedSizeScope="True">

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <StackPanel Orientation="Horizontal">
                    <TextBlock Margin="4,0"
                               FontWeight="Bold"
                               Text="{x:Static properties:Resources.TextFields}" />
                    <Button Style="{StaticResource ImageButton}" ToolTip="{x:Static properties:Resources.AddTextField}">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Click">
                                <ei:CallMethodAction MethodName="AddField" TargetObject="{Binding}" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <Path x:Name="Path"
                              Width="16"
                              Height="16"
                              Data="M2.880352,35.504997L25.563028,35.504997 25.461889,35.77055C24.680614,37.90033 24.254,40.199783 24.254,42.596951 24.254,44.994007 24.680614,47.293259 25.461889,49.422794L25.562908,49.688 2.880352,49.688C1.290522,49.688,3.8410201E-07,48.396416,0,46.807915L0,38.38258C3.8410201E-07,36.794079,1.290522,35.504997,2.880352,35.504997z M41.691601,32.867001L41.691601,40.591217 33.968002,40.591217 33.968002,45.48729 41.691601,45.48729 41.691601,53.211002 46.587406,53.211002 46.587406,45.48729 54.311005,45.48729 54.311005,40.591217 46.587406,40.591217 46.587406,32.867001z M44.126499,27.625C52.394669,27.625 59.098,34.325611 59.098,42.596501 59.098,50.859093 52.394669,57.565003 44.126499,57.565003 35.858036,57.565003 29.156,50.859093 29.156,42.596501 29.156,34.325611 35.858036,27.625 44.126499,27.625z M2.880352,17.594002L43.182121,17.594002C44.771912,17.594002,46.061001,18.882946,46.061001,20.471779L46.061001,22.816408 45.653107,22.780068C45.149128,22.741593 44.639954,22.722 44.126297,22.722 37.278214,22.722 31.227619,26.205 27.652683,31.492657L27.472803,31.773003 2.880352,31.773003C1.290522,31.773001,3.8410201E-07,30.484057,8.8062882E-07,28.893322L8.8062882E-07,20.471779C3.8410201E-07,18.882946,1.290522,17.594002,2.880352,17.594002z M8.4794798,3.8200022C6.678607,3.8200022 5.2110004,5.2864023 5.2110014,7.0887662 5.2110004,8.8935586 6.678607,10.357 8.4794798,10.357 10.281624,10.357 11.748,8.8935586 11.748,7.0887662 11.748,5.2864023 10.281624,3.8200022 8.4794798,3.8200022z M2.880352,0L43.182117,0C44.771912,5.590332E-07,46.061001,1.2890898,46.061001,2.8779911L46.061001,11.302441C46.061001,12.893875,44.771912,14.18,43.182117,14.18L2.880352,14.18C1.290522,14.18,3.8410201E-07,12.893875,0,11.302441L0,2.8779911C3.8410201E-07,1.2890898,1.290522,5.590332E-07,2.880352,0z"
                              Fill="{Binding Path=Background,
                                             RelativeSource={RelativeSource AncestorType={x:Type Button}}}"
                              Stretch="Uniform" />

                    </Button>
                </StackPanel>


                <Grid Name="Haeders"
                      Grid.Row="1"
                      Margin="8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" SharedSizeGroup="A" />
                        <ColumnDefinition Width="Auto" SharedSizeGroup="B" />
                        <ColumnDefinition Width="Auto" SharedSizeGroup="C" />
                        <ColumnDefinition Width="Auto" SharedSizeGroup="D" />
                        <ColumnDefinition Width="Auto" SharedSizeGroup="E" />
                        <ColumnDefinition Width="Auto" SharedSizeGroup="F" />
                        <ColumnDefinition Width="Auto" SharedSizeGroup="G" />
                        <ColumnDefinition Width="Auto" SharedSizeGroup="H" />
                        <ColumnDefinition Width="Auto" SharedSizeGroup="I" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="{x:Static properties:Resources.FieldName}" />
                    <TextBlock Grid.Column="1" Text="{x:Static properties:Resources.Text}" />
                    <TextBlock Grid.Column="2"
                               Grid.ColumnSpan="2"
                               Text="{x:Static properties:Resources.Position}" />
                    <TextBlock Grid.Column="4" Text="{x:Static properties:Resources.FontSize}" />
                    <TextBlock Grid.Column="5"
                               Grid.ColumnSpan="3"
                               Text="{x:Static properties:Resources.FontStyle}" />
                </Grid>

                <ItemsControl Grid.Row="2"
                              Margin="8"
                              ItemsSource="{Binding SelectedMaterialProvider.MaterialModel.MaterialFields}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate DataType="models:MaterialFieldModel">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" SharedSizeGroup="A" />
                                    <ColumnDefinition Width="Auto" SharedSizeGroup="B" />
                                    <ColumnDefinition Width="Auto" SharedSizeGroup="C" />
                                    <ColumnDefinition Width="Auto" SharedSizeGroup="D" />
                                    <ColumnDefinition Width="Auto" SharedSizeGroup="E" />
                                    <ColumnDefinition Width="Auto" SharedSizeGroup="F" />
                                    <ColumnDefinition Width="Auto" SharedSizeGroup="G" />
                                    <ColumnDefinition Width="Auto" SharedSizeGroup="H" />
                                    <ColumnDefinition Width="Auto" SharedSizeGroup="I" />
                                    <ColumnDefinition Width="Auto" SharedSizeGroup="J" />
                                    <ColumnDefinition Width="Auto" SharedSizeGroup="K" />
                                </Grid.ColumnDefinitions>
                                <Grid.Resources>
                                    <Style TargetType="Path">
                                        <Setter Property="Width" Value="18" />
                                        <Setter Property="Height" Value="18" />
                                        <Setter Property="Fill" Value="Black" />
                                        <Setter Property="Stretch" Value="Uniform" />
                                    </Style>
                                    <Style BasedOn="{StaticResource {x:Type view:NumericUpDown}}" TargetType="view:NumericUpDown">
                                        <Setter Property="VerticalAlignment" Value="Center" />
                                    </Style>
                                    <Style BasedOn="{StaticResource {x:Type ToggleButton}}" TargetType="ToggleButton">
                                        <Setter Property="VerticalAlignment" Value="Center" />
                                    </Style>
                                </Grid.Resources>
                                <TextBlock Margin="4"
                                           VerticalAlignment="Center"
                                           Text="{Binding FieldName}" />
                                <TextBox Grid.Column="1"
                                         Margin="4,4,8,4"
                                         AcceptsReturn="True"
                                         Text="{Binding Value,
                                                        UpdateSourceTrigger=PropertyChanged}" />

                                <view:NumericUpDown Grid.Column="2" Value="{Binding TopMargin}" />

                                <view:NumericUpDown Grid.Column="3" Value="{Binding LeftMargin}" />

                                <view:NumericUpDown Grid.Column="4"
                                                    Minimum="1"
                                                    Value="{Binding FontSize}" />
                                <ToggleButton Grid.Column="5"
                                              IsChecked="{Binding Uppper,
                                                                  Mode=TwoWay}"
                                              ToolTip="{x:Static properties:Resources.Versal}">
                                    <Path Data="M1.03125,27.2356262207031L22.21875,27.2356262207031 22.21875,29.5325012207031 20.3203125,29.9543800354004 18.9375,30.4700012207031 17.25,32.0637512207031 16.6875,34.8293762207031 17.0625,38.2746887207031 18.140625,42.4231262207031 29.109375,80.6731262207031 42.5625,42.1418762207031 43.125,40.2668762207031 43.6171875,38.3450012207031 43.8984375,36.7043762207031 43.96875,35.3918762207031 43.646484375,32.9602394104004 42.6796875,31.2903137207031 40.939453125,30.2063331604004 38.296875,29.5325012207031 38.296875,27.2356262207031 57.984375,27.2356262207031 57.984375,29.5325012207031 56.2499961853027,30.1067237854004 54.890625,30.8918762207031 53.7246055603027,32.0520362854004 52.5703125,33.7512512207031 51.2988243103027,36.3059425354004 49.78125,40.0325012207031 30.328125,91.9700012207031 24.1875,91.9700012207031 8.390625,39.7043762207031 7.20703077316284,36.0539894104004 6.1875,33.6340637207031 5.203125,32.0520362854004 4.12499952316284,30.9153137207031 2.7890625,30.1125831604004 1.03125,29.5325012207031 1.03125,27.2356262207031z" />
                                </ToggleButton>
                                <ToggleButton Grid.Column="6" IsChecked="{Binding Bold, Mode=TwoWay}">
                                    <Path Data="M355.855,399.674C330.622,399.674 309.055,400.03 291.197,400.749 277.365,401.469 265.726,402.188 256.159,403.627L256.159,697.99C300.644,706.975 344.933,711.648 387.786,711.648 459.378,711.648 514.388,696.911 551.46,668.16 588.095,640.124 606.671,604.542 606.671,562.848 606.671,535.172 598.141,508.215 581.477,482.698 564.935,457.54 537.429,437.051 499.678,422.318 461.331,407.581 412.977,399.674 355.855,399.674z M357.728,53.1934C320.576,53.1934,286.414,56.7867,256.159,63.6136L256.159,338.93C269.193,341.089 283.703,342.523 299.688,343.603 319.021,345.042 340.15,345.402 363.229,345.402 421.508,345.402 465.677,340.009 494.457,328.506 522.6,317.726 544.446,300.834 559.433,278.55 574.501,255.907 582.075,230.745 582.075,204.148 582.075,162.094 563.579,127.591 525.59,97.7611 487.761,68.2862 431.235,53.1934 357.728,53.1934z M0,0L368.73,0C436.417,-6E-06 491.428,4.66824 532.327,13.6537 595.231,26.9565 644.142,51.7543 677.667,86.617 711.271,121.839 728.332,162.814 728.332,208.461 728.332,247.636 714.899,283.218 688.35,314.492 666.983,339.65 637.047,359.42 599.177,374.153 644.461,385.656 679.859,401.829 704.573,423.033 745.991,458.26 767,502.108 767,553.503 767,591.963 753.246,629.699 726.14,664.926 698.953,700.508 661.324,726.745 614.125,742.917 567.645,758.734 496.211,767 401.975,767L0,767 0,730.339 40.3007,730.339C72.1515,730.339 94.275,721.713 107.749,703.742 113.45,696.195 120.386,676.066 120.386,625.746L120.386,140.89C120.386,85.8974 111.895,65.4124 104.759,58.2258 90.5281,43.8481 69.3608,36.6571 40.3007,36.6571L0,36.6571z" />
                                </ToggleButton>

                                <ToggleButton Grid.Column="7" IsChecked="{Binding Italic, Mode=TwoWay}">
                                    <Path Data="M316.192,0L767,0 749.878,39.1939 738.741,39.1939C704.077,39.1939 682.646,41.3535 669.096,46.0239 647.139,52.8584 630.543,62.2081 619.512,74.0729 607.538,86.6576 591.782,116.506 572.349,162.175L382.949,613.455C362.044,663.798 357.738,683.217 357.738,690.407 357.738,697.602 360.101,703.352 365.195,708.387 370.238,713.062 378.8,717.017 390.774,719.896 400.071,722.051 423.024,725.286 479.381,727.806L496.609,728.526 479.958,767 0,767 21.5877,727.806 30.8844,727.806C84.5105,727.086 106.255,723.491 115.081,720.972 136.614,715.221 152.213,707.667 161.722,698.317 178.526,681.778 196.386,651.574 214.665,608.42L404.85,156.78C420.607,120.461 428.538,92.7722 428.538,74.4328 428.538,66.8829 425.964,60.7683 420.607,55.7336 415.407,50.6988 406.848,46.7438 395.345,43.8687 386.571,41.7091 365.878,39.1939 316.506,39.1939L297.598,39.1939z" />
                                </ToggleButton>
                                <ComboBox Grid.Column="8"
                                          VerticalAlignment="Center"
                                          IsEditable="True"
                                          ItemsSource="{Binding Path=DataContext.FontService.AllFontFamilies,
                                                                RelativeSource={RelativeSource AncestorType=view:LayoutView}}"
                                          SelectedItem="{Binding FontFamilyWithName}"
                                          TextSearch.TextPath="Name">
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate DataType="contracts:FontFamilyWithName">
                                            <TextBlock FontFamily="{Binding FontFamily}"
                                                       FontSize="16"
                                                       Text="{Binding Name}"
                                                       ToolTip="{Binding Name}" />
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                </ComboBox>

                                <Button Grid.Column="9"
                                        Style="{StaticResource ImageButtonCritical}"
                                        ToolTip="{x:Static properties:Resources.DeleteTextField}">
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="Click">
                                            <ei:CallMethodAction MethodName="DeleteTextField" TargetObject="{Binding}" />
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                    <Path x:Name="Path"
                                          Width="16"
                                          Height="16"
                                          Data="M469.314,171.95L469.314,675.277 575.603,675.277 575.603,171.95z M203.347,171.95L203.347,675.277 309.686,675.277 309.686,171.95z M211.071,0L567.926,0 567.926,83.6537 779,83.6537 779,171.95 714.002,171.95 714.002,779 64.9982,779 64.9982,171.95 0,171.95 0,83.6537 211.071,83.6537z"
                                          Fill="{Binding Path=Background,
                                                         RelativeSource={RelativeSource AncestorType={x:Type Button}}}"
                                          Stretch="Uniform" />

                                </Button>

                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <view:LogoLayout Grid.Row="3"
                                 HorizontalAlignment="Left"
                                 DataContext="{Binding SelectedMaterialProvider.MaterialModel.LogoModel}" />
            </Grid>
            <ScrollViewer.Style>
                <Style TargetType="FrameworkElement">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding ViewState}" Value="OnlyPreview">
                            <DataTrigger.ExitActions>
                                <BeginStoryboard Storyboard="{StaticResource FadeIn}" />
                            </DataTrigger.ExitActions>
                            <DataTrigger.EnterActions>
                                <BeginStoryboard Storyboard="{StaticResource FadeOut}" />
                            </DataTrigger.EnterActions>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </ScrollViewer.Style>
        </ScrollViewer>

        <GridSplitter Grid.Column="1"
                      Width="8"
                      HorizontalAlignment="Stretch"
                      Background="Transparent" />

        <view:LayoutArea Grid.Column="2" Margin="8">
            <view:LayoutArea.Style>
                <Style TargetType="FrameworkElement">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding ViewState}" Value="OnlyInput">
                            <DataTrigger.EnterActions>
                                <BeginStoryboard Storyboard="{StaticResource FadeOut}" />
                            </DataTrigger.EnterActions>
                            <DataTrigger.ExitActions>
                                <BeginStoryboard Storyboard="{StaticResource FadeIn}" />
                            </DataTrigger.ExitActions>

                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </view:LayoutArea.Style>
        </view:LayoutArea>
    </Grid>
</UserControl>
